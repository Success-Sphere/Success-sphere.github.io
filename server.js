const express=require("express"),mysql=require("mysql2"),path=require("path"),bodyParser=require("body-parser"),app=express(),PORT=3e3,db=mysql.createConnection({host:"localhost",user:"root",password:"GHHJghjgYT&T&*h%^*%^6oVHGT&D%$etybHUTUGHIT*jNKHGT&RR^EYyigURUYUhuiyWREGRNCDWRES@RDFYT%D$ERDFHGUG&^FYERDFGHJKLIHUYTHJOLI):P(",database:"success_sphere"});db.connect(e=>{e&&(console.error("MySQL connection failed:",e),process.exit(1)),console.log("✅ Connected to MySQL")}),app.use(express.static(__dirname)),app.use(bodyParser.urlencoded({extended:!0})),app.use(express.json()),app.get("/",(e,s)=>s.sendFile(path.join(__dirname,"index.html"))),app.get("/register",(e,s)=>s.sendFile(path.join(__dirname,"register.html"))),app.get("/login",(e,s)=>s.sendFile(path.join(__dirname,"login.html"))),app.get("/dashboard",(e,s)=>s.sendFile(path.join(__dirname,"dashboard.html"))),app.get("/about",(e,s)=>s.sendFile(path.join(__dirname,"about.html"))),app.post("/register",(e,s)=>{const{fullName:o,email:r,phone:n,password:a,confirm_password:t}=e.body;if(a!==t)return s.send("❌ Passwords do not match.");db.query("INSERT INTO users (fullName, email, phone, password) VALUES (?, ?, ?, ?)",[o,r,n,a],e=>{if(e)return s.send("❌ Registration failed: "+e.message);s.send('\n      ✅ Registration successful!\n      <script>\n        alert("Registration successful!");\n        window.location.href = "/dashboard";\n      <\/script>\n    ')})}),app.post("/login",(e,s)=>{const{email:o,password:r}=e.body;db.query("SELECT * FROM users WHERE email = ? AND password = ?",[o,r],(e,o)=>e?s.send("❌ Login error: "+e.message):o.length?void s.send('\n      <p>✅ Login successful. Redirecting…</p>\n      <script>setTimeout(() => location.href="/dashboard", 1000);<\/script>\n    '):s.send("❌ Invalid email or password."))}),app.use((e,s)=>s.status(404).send("404: Page not found")),app.listen(3e3,()=>console.log("🌐 Server running at http://localhost:3000"));